<form [formGroup]="form" class="p-4">
  <div class="row gy-3">
    <!-- Frequency Selector -->
    <div class="col-md-4">
      <label class="form-label fw-semibold" for="timeFrequency">Frequency</label>
      <ng-select
        id="timeFrequency"
        formControlName="timeFrequency"
        [clearable]="false"
        [searchable]="false"
        [items]="getTimeEnumValues(TimeFrequency)"
        (change)="onChangeFrequency()"
        class="w-100 flex-item">
      </ng-select>
    </div>

    <!-- Time Selector -->
    <div class="col-md-4">
      <label class="form-label fw-semibold">Time (HH:MM)</label>
      <ngb-timepicker
        formControlName="time"
        [seconds]="false"
        [spinners]="false"
        [meridian]="false"
        class="w-100 flex-item">
      </ngb-timepicker>
    </div>

    <!-- Daily Frequency -->
    <div class="col-md-4" *ngIf="timeFrequency.value === TimeFrequency.Daily">
      <label class="form-label fw-semibold" for="dailyFrequency">Repeat every (days)</label>
      <ng-select
        id="dailyFrequency"
        formControlName="dailyFrequency"
        [clearable]="false"
        [searchable]="false"
        [items]="frequenciesByType"
        (change)="emitChange()"
        class="w-100 flex-item">
      </ng-select>
    </div>

    <!-- Monthly Frequency -->
    <div class="col-md-4" *ngIf="timeFrequency.value === TimeFrequency.Monthly">
      <label class="form-label fw-semibold" for="monthlyFrequency">Repeat every (months)</label>
      <ng-select
        id="monthlyFrequency"
        formControlName="monthlyFrequency"
        [clearable]="false"
        [searchable]="false"
        [items]="frequenciesByType"
        (change)="emitChange()"
        class="w-100 flex-item">
      </ng-select>
    </div>

    <!-- Annual Frequency -->
    <div class="col-md-4" *ngIf="timeFrequency.value === TimeFrequency.Yearly">
      <label class="form-label fw-semibold" for="yearlyFrequency">Repeat every (month)</label>
      <ng-select
        id="yearlyFrequency"
        formControlName="yearlyFrequency"
        [items]="months"
        bindLabel="name"
        bindValue="value"
        (change)="emitChange()"
        class="w-100">
      </ng-select>
    </div>
  </div>

  <!-- Weekly Days Selector -->
  <ng-container *ngIf="timeFrequency.value === TimeFrequency.Weekly">
    <div class="mt-4">
      <label class="form-label fw-semibold d-block mb-2">Select days</label>
      <div class="d-flex flex-wrap gap-2">
        <span
          *ngFor="let day of getTimeEnumValues(DaysOfWeek)"
          class="badge rounded-pill px-3 py-2 ml-1"
          style="cursor: pointer"
          [ngClass]="isSelected(day) ? 'bg-primary text-white' : 'bg-light text-dark border'"
          (click)="setDays(day)">
          {{ day }}
        </span>
      </div>
    </div>
  </ng-container>
</form>
